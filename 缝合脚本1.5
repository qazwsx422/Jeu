-- Button hover effects
local function createButtonEffect(button)
    local originalSize = button.Size
    local originalColor = button.BackgroundColor3
    
    button.MouseEnter:Connect(function()
        -- 修复：分别处理RGB分量
        local r, g, b = originalColor.R, originalColor.G, originalColor.B
        local newColor = Color3.fromRGB(
            math.min(r * 255 + 20, 255),
            math.min(g * 255 + 20, 255),
            math.min(b * 255 + 20, 255)
        )
        
        local tween = TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = newColor,
            Size = UDim2.new(0.9, 0, 0, 40)
        })
        tween:Play()
    end)
    
    button.MouseLeave:Connect(function()
        local tween = TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = originalColor,
            Size = originalSize
        })
        tween:Play()
    end)
end

-- Helper function to create buttons
local function CreateButton(text, color, callback)
    local button = Instance.new("TextButton")
    button.Parent = Content
    button.Size = UDim2.new(0.85, 0, 0, 35)
    button.Position = UDim2.new(0.075, 0, 0, 0)
    button.BackgroundColor3 = color
    button.BorderSizePixel = 0
    button.Text = text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.TextSize = 14
    button.Font = Enum.Font.Gotham
    button.AutoButtonColor = false
    button.LayoutOrder = #Content:GetChildren()
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = button
    
    -- Add button effects
    createButtonEffect(button)
    
    button.MouseButton1Click:Connect(function()
        -- 修复点击效果
        local r, g, b = color.R, color.G, color.B
        local darkerColor = Color3.fromRGB(
            math.max(r * 255 - 30, 0),
            math.max(g * 255 - 30, 0),
            math.max(b * 255 - 30, 0)
        )
        
        local clickTween = TweenService:Create(button, TweenInfo.new(0.1), {
            BackgroundColor3 = darkerColor
        })
        clickTween:Play()
        clickTween.Completed:Wait()
        
        -- Execute callback
        pcall(callback)
        
        -- Restore color
        local restoreTween = TweenService:Create(button, TweenInfo.new(0.1), {
            BackgroundColor3 = color
        })
        restoreTween:Play()
    end)
    
    return button
end
